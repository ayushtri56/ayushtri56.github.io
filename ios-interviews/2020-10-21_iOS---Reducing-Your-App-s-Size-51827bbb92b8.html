<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>iOS - Reducing Your App’s Size</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">iOS - Reducing Your App’s Size</h1>
</header>
<section data-field="subtitle" class="p-summary">
Users often avoid downloading apps that seem too large, particularly in emerging markets where devices connect to often-spotty 2G and 3G…
</section>
<section data-field="body" class="e-content">
<section name="dcd7" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="3e1f" id="3e1f" class="graf graf--h3 graf--leading graf--title">iOS - Reducing Your App’s Size</h3><p name="0ce2" id="0ce2" class="graf graf--p graf-after--h3">Users often avoid downloading apps that seem too large, particularly in emerging markets where devices connect to often-spotty 2G and 3G networks or work on pay-by-the-byte plans. This article describes how to reduce your app’s download size, which enables more users to download your app.</p><figure name="6e04" id="6e04" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*nxkICzxS_t5J9BwBpzgDxA.png" data-width="1444" data-height="568" src="https://cdn-images-1.medium.com/max/800/1*nxkICzxS_t5J9BwBpzgDxA.png"></figure><p name="e614" id="e614" class="graf graf--p graf-after--figure">Before you start optimizing your app, you first need to measure its download and installation sizes.</p><p name="cfbb" id="cfbb" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Did you know none of the binaries that you create for debugging or that you upload to the App Store from within Xcode are suitable for measuring your app’s size?</em></strong></p><p name="a041" id="a041" class="graf graf--p graf-after--p">You can’t use any of the following binaries:</p><ul class="postList"><li name="75e6" id="75e6" class="graf graf--li graf-after--p">The APP file (the app bundle)</li><li name="f6b3" id="f6b3" class="graf graf--li graf-after--li">The XCARCHIVE bundle that you create when your archive your app</li><li name="1721" id="1721" class="graf graf--li graf-after--li">The IPA file that you upload to App Store Connect</li></ul><p name="b47d" id="b47d" class="graf graf--p graf-after--li">Those binaries contain resources and files that aren’t part of the bundles that your users download from the App Store; for example, DSYM files for crash reporting.</p><figure name="3a14" id="3a14" class="graf graf--figure graf--layoutOutsetLeft graf-after--p"><img class="graf-image" data-image-id="1*1B-uorVvj1vtoA32hOm-yQ.jpeg" data-width="371" data-height="473" src="https://cdn-images-1.medium.com/max/600/1*1B-uorVvj1vtoA32hOm-yQ.jpeg"></figure><pre name="0ff0" id="0ff0" class="graf graf--pre graf-after--figure"><strong class="markup--strong markup--pre-strong"><em class="markup--em markup--pre-em">Did you know when compared to the binary you uploaded, the final size of your app after it’s approved for the App Store may end up being slightly larger?<br><br></em></strong></pre><pre name="ecb2" id="ecb2" class="graf graf--pre graf-after--pre">This size increase can happen when the App Store performs additional processing on your app’s binaries, adding DRM to prevent app piracy and then recompressing the binaries.<br><br></pre><p name="5b2c" id="5b2c" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">What is the application size specified by the apple cellular download limit?</em></strong>Apple has kept iOS cellular download limit to 200MB</p><h3 name="3de5" id="3de5" class="graf graf--h3 graf-after--p">Measuring your app’s size</h3><ol class="postList"><li name="5aa0" id="5aa0" class="graf graf--li graf-after--h3">Gathering information from <a href="https://help.apple.com/app-store-connect/#/dev3b56ce97c" data-href="https://help.apple.com/app-store-connect/#/dev3b56ce97c" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">App Store Connect</a></li><li name="1f6f" id="1f6f" class="graf graf--li graf-after--li">Create the App Size Report</li></ol><p name="64a8" id="64a8" class="graf graf--p graf-after--li">With the app size report you generate, you will be ready to perform some basic optimizations, such as checking your binaries for unused assets, to reduce the size of your app.</p><h4 name="780a" id="780a" class="graf graf--h4 graf-after--p">Create the App Size Report</h4><p name="dd9a" id="dd9a" class="graf graf--p graf-after--h4">While App Store Connect provides the most accurate measurements of your app’s size, Xcode’s built-in reporting tools can create an app size report for you. It provides close estimates of your app’s download and installation sizes. To create an app size report:</p><ol class="postList"><li name="82d8" id="82d8" class="graf graf--li graf-after--p">Archive your app in Xcode.</li><li name="af9a" id="af9a" class="graf graf--li graf-after--li">Export your archived app as an Ad Hoc, Development, or Enterprise build.</li><li name="e5aa" id="e5aa" class="graf graf--li graf-after--li">In the sheet for setting the development distribution options, choose “All compatible device variants” for app thinning, and enable Rebuild from Bitcode.</li><li name="63aa" id="63aa" class="graf graf--li graf-after--li">Sign your app and export it to your Mac.</li></ol><p name="dd27" id="dd27" class="graf graf--p graf-after--li">This process creates a folder with your app’s artifacts:</p><ul class="postList"><li name="d5a2" id="d5a2" class="graf graf--li graf-after--p">A <em class="markup--em markup--li-em">universal</em> IPA file for older devices. This single IPA file contains assets and binaries for all variants of your app.</li><li name="a2fd" id="a2fd" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">Thinned</em> IPA files for each variant of your app. These files contain assets and binaries for only one variant.</li></ul><p name="cf7b" id="cf7b" class="graf graf--p graf-after--li">The output folder for your exported app also contains the app size report: a file named <code class="markup--code markup--p-code">App Thinning Size Report.txt</code>. This report lists the compressed and uncompressed sizes for each of your app’s IPA files. The uncompressed size is equivalent to the size of the installed app on the device, and the compressed size is the download size of your app. The following shows the beginning of the app size report for a sample app:</p><figure name="76cc" id="76cc" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*25RojoS8jv6RdrxXwd9vbg.png" data-width="1494" data-height="508" src="https://cdn-images-1.medium.com/max/800/1*25RojoS8jv6RdrxXwd9vbg.png"><figcaption class="imageCaption">References: developer.apple.com</figcaption></figure><h3 name="257c" id="257c" class="graf graf--h3 graf-after--figure">Basic Optimization to Reduce Your App’s Size</h3><h4 name="83c6" id="83c6" class="graf graf--h4 graf-after--h3">1. Check Your Target’s Build Settings for Release Builds</h4><p name="5ad0" id="5ad0" class="graf graf--p graf-after--h4">Specify the degree to which the generated code is optimized for speed and binary size.</p><p name="ecfe" id="ecfe" class="graf graf--p graf-after--p">[-O0]<strong class="markup--strong markup--p-strong">None:</strong> Do not optimize. With this setting, the compiler’s goal is to reduce the cost of compilation and to make debugging produce the expected results. Statements are independent — if you stop the program with a breakpoint between statements, you can then assign a new value to any variable or change the program counter to any other statement in the function and get exactly the results you would expect from the source code.</p><p name="e75d" id="e75d" class="graf graf--p graf-after--p">[-O1]<strong class="markup--strong markup--p-strong">Fast: </strong>Optimizing compilation takes somewhat more time, and a lot more memory for a large function. With this setting, the compiler tries to reduce code size and execution time, without performing any optimizations that take a great deal of compilation time. In Apple’s compiler, strict aliasing, block reordering, and inter-block scheduling are disabled by default when optimizing.</p><p name="3ef8" id="3ef8" class="graf graf--p graf-after--p">[-O2 ]<strong class="markup--strong markup--p-strong">Faster</strong>: The compiler performs nearly all supported optimizations that do not involve a space-speed tradeoff. With this setting, the compiler does not perform loop unrolling or function inlining, or register renaming. As compared to the `Fast` setting, this setting increases both compilation time and the performance of the generated code.</p><p name="56e3" id="56e3" class="graf graf--p graf-after--p">[-O3]<strong class="markup--strong markup--p-strong">Fastest</strong>: Turns on all optimizations specified by the `Faster` setting and also turns on function inlining and register renaming options. This setting may result in a larger binary.</p><p name="28de" id="28de" class="graf graf--p graf-after--p">[-Os]<strong class="markup--strong markup--p-strong">Fastest, Smallest:</strong> Optimize for size. This setting enables all `Faster` optimizations that do not typically increase code size. It also performs further optimizations designed to reduce code size.</p><p name="6652" id="6652" class="graf graf--p graf-after--p">[-Ofast]<strong class="markup--strong markup--p-strong">Fastest, Aggressive Optimizations:</strong> This setting enables `Fastest` but also enables aggressive optimizations that may break strict standards compliance but should work well on well-behaved code.</p><p name="a734" id="a734" class="graf graf--p graf-after--p">[-Oz]<strong class="markup--strong markup--p-strong">Smallest, Aggressive Size Optimizations:</strong> This setting enables additional size savings by isolating repetitive code patterns into a compiler generated function.</p><h4 name="8fe3" id="8fe3" class="graf graf--h4 graf-after--p">2. Identify and Remove Unused Assets</h4><p name="9c68" id="9c68" class="graf graf--p graf-after--h4">Next, look inside your app’s IPA file to find out if your app contains unused assets or unnecessary files. Make sure you’re not adding your app’s <code class="markup--code markup--p-code">README</code> or not required file to a target, remove any unused image assets and header files, and so on.</p><h4 name="cc9e" id="cc9e" class="graf graf--h4 graf-after--p">3. Adopt Asset Catalogs for Your App’s Resources</h4><p name="daa0" id="daa0" class="graf graf--p graf-after--h4">Asset catalogs allow Xcode and the App Store to optimize your app’s assets, which can significantly reduce the size of your app. Use asset catalogs instead of putting your assets in your app bundle directly then do the following:</p><ul class="postList"><li name="c14f" id="c14f" class="graf graf--li graf-after--p">Tag each asset — for example images, textures, or data assets — with relevant metadata to indicate which devices the asset is for. Doing so maximizes the size reduction that <strong class="markup--strong markup--li-strong">app thinning</strong> provides, which can be significant for apps with assets that aren’t required by every device.</li><li name="c615" id="c615" class="graf graf--li graf-after--li">Set the level of compression for each asset type. In particular, for apps using wide color images or textures with Metal, consider the <code class="markup--code markup--li-code">ASTC</code> compression options.</li></ul><h4 name="fc6b" id="fc6b" class="graf graf--h4 graf-after--li">4. Use Asset Files for Data that Ships with Your App</h4><p name="0537" id="0537" class="graf graf--p graf-after--h4">As you inspect your app’s IPA file, you may find that your app’s binaries take up a lot of space. If you ship your app with data, consider using asset files instead of putting the data into your code.<br>For example, use a property list for bundling any data with your app instead of using strings in code. Also, some developers use source code to ship other resources for example, images. Consider using asset files instead, and put them in an asset catalog. Moving data and assets out of your source code and into asset files significantly reduces the size of your app’s binary. It also allows App Store Connect to more efficiently compress your app.</p><h4 name="b407" id="b407" class="graf graf--h4 graf-after--p">5. Enable Bitcode</h4><p name="ebd8" id="ebd8" class="graf graf--p graf-after--h4"><em class="markup--em markup--p-em">Bitcode</em> is an Apple technology that enables you to recompile your app to reduce its size. The recompilation happens when you upload your app to App Store Connect or export it for Ad Hoc, Development, or Enterprise distribution.</p><h3 name="ad7b" id="ad7b" class="graf graf--h3 graf-after--p">Advanced Optimization to Further Reduce Your App’s Size</h3><h4 name="63ab" id="63ab" class="graf graf--h4 graf-after--h3">1. Optimise Your App’s Asset Files</h4><ul class="postList"><li name="439c" id="439c" class="graf graf--li graf-after--h4"><strong class="markup--strong markup--li-strong">Use the most efficient image and video format possible </strong>Using a more efficient image file format is a good way to reduce your app’s size. For example, consider using the HEIF format for images, and the HEVC format for videos. If you’re using PNG files, consider using 8-bit instead of 32-bit PNGs. Doing so can decrease the image size to a quarter of the original size.</li><li name="aa3a" id="aa3a" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Compress images </strong>For 32-bit images, using <a href="https://www.adobe.com/photoshop" data-href="https://www.adobe.com/photoshop" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Adobe Photoshop</a>’s “Save for Web” feature can reduce the size of JPEG and PNG images considerably.</li><li name="4e52" id="4e52" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Compress audio files </strong>As a general rule, compress audio using <code class="markup--code markup--li-code">AAC</code> or <code class="markup--code markup--li-code">MP3</code> codecs, and experiment with a reduced bit rate.</li></ul><h4 name="b126" id="b126" class="graf graf--h4 graf-after--li">2. Reduce the Size of App Updates</h4><p name="3c4d" id="3c4d" class="graf graf--p graf-after--h4">Instead of always downloading the whole app when an update to the app is available, the App Store creates an <em class="markup--em markup--p-em">update package</em>. It compares one or more prior versions of your app to the new version and creates an optimized package. This package contains only the content that has changed between versions of your app, excluding any content that didn’t change.</p><p name="fbdb" id="fbdb" class="graf graf--p graf-after--p">This comparison looks at everything in the <em class="markup--em markup--p-em">application bundle</em>, including the application executable, storyboards, nibs, localizations, and other assets, like images.</p><h4 name="d101" id="d101" class="graf graf--h4 graf-after--p">3. Adopt On-Demand Resources</h4><p name="f82a" id="f82a" class="graf graf--p graf-after--h4">Analyze all of your app’s assets and determine which resources it uses infrequently. Group the infrequently used resources into <em class="markup--em markup--p-em">asset packs</em>. When you upload your app to App Store Connect, asset packs don’t become part of your app’s initial download or app updates. Instead, the app can download them separately as needed.</p><h4 name="455e" id="455e" class="graf graf--h4 graf-after--p">4. Leverage App Thinning</h4><p name="53ba" id="53ba" class="graf graf--p graf-after--h4"><em class="markup--em markup--p-em">App thinning</em> is a technology that ensures that an app’s IPA file only contains resources and code that’s necessary to run the app on a particular device. Apps that are available in the App Store, and that you distribute to testers using TestFlight, already leverage app thinning.</p><h3 name="2d0c" id="2d0c" class="graf graf--h3 graf-after--p">Voila!</h3><p name="99d9" id="99d9" class="graf graf--p graf-after--h3">Now you have all the bullets.</p><p name="5038" id="5038" class="graf graf--p graf-after--p graf--trailing">References: <a href="https://developer.apple.com/" data-href="https://developer.apple.com/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://developer.apple.com/</a></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@nishantnitb" class="p-author h-card">Nishant Sharma</a> on <a href="https://medium.com/p/51827bbb92b8"><time class="dt-published" datetime="2020-10-21T03:23:47.975Z">October 21, 2020</time></a>.</p><p><a href="https://medium.com/@nishantnitb/ios-reducing-your-apps-size-51827bbb92b8" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on February 11, 2021.</p></footer></article></body></html>